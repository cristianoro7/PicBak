---
layout: post
title: TCP首部
data: 2017/5/21
subtitle: ""
description: ""
thumbnail: "/img/计网/TCP首部.jpeg"
tags:
  - 计算机网络#运输层
categories:
  - 计算机网络
---

# TCP首部

> ## 概述

TCP的全部功能都体现在其首部中的各个字段的作用.因此, 只有弄清TCP首部各个字段的作用才能理解TCP的工作原理.

TCP首部的前20个字节是固定的,后面有4n字节是根据需要而增加的选项.因此,TCP首部的最小长度为20字节.

### 源端口和目的端口

各占2个字节, 分别写入源端口号和目的端口号. TCP的分用和复用功能是通过端口实现的.

### 序号

占4个字节.TCP是面向字节流的,在一个TCP连接中传送的字节流中的每一个字节都按顺序编号.序号字段值是用来指定本报文段所发送的数据的第一个字节的序号.

### 确认号

占4字节.是接收方期望收到发送方下一个报文段的第一个数据字节序号.例如:B正确接收了A发送过来的一个报文段,其序号字段为501,数据长度为200字节,表明B正确接收了501~700的序号的数据.因此,B期望收到A的下一个数据序号是701, 于是B在发送给A的确认报文中把确认号置为701.

### 数据偏移

占4位, 它指出TCP报文段的数据起始处距离TCP报文段的起始处有多远.这个字段实际上是指出TCP首部的长度.

### 保留

占6位, 保留为今后使用, 但目前应置为0

### 紧急URG

当URG = 1时, 表明紧急指针字段有效.它告诉系统,当前报文段有紧急数据,应当尽快传送.

### 确认ACK

仅当ACK = 1时确认号字段才有效.当ACK = 0时,确认号无效. TCP规定,在连接建立后所有传送的报文段都必须把ACK置为1.

### 推送PSH

当发送方将PSH置为1,并立即创建一个报文段发送出去.接收方TCP收到PSH = 1的报文段时,就尽快地交付接收应用程序,而不再等到整个缓存填满了再向上交付.

### 复位(RST)

当RST = 1 时, 表明TCP连接出现严重错误,必须释放连接,然后再重新建立连接.

### 同步SYN

在连接建立时用来同步序号. 当SYN = 1 时而ACK = 0 时表示这是一个连接请求报文段.若对方同意连接后, 则应在响应报文中使SYN = 1和ACK = 1.实际上SYN = 1 时表示这是一个连接请求或接受报文.

### 终止FIN

用来释放一个连接. 当FIN = 1 时, 表明此报文段的发送数据已发送完毕,并要求释放连接.

### 窗口

占2字节.窗口指的是发送报文段一方的接收窗口.窗口值告诉对方:接收方目前允许对方发送的数据量.

### 检验和

检验和字段检验的范围包括首部和数据这两部分.

### 紧急指针

占2字节. 当URG = 1 时才有意义, 它指出本报文段中的紧急数据字节数.

> ## 参考资料
> 计算机网络(谢希仁)
