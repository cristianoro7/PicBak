---
title: 图解HTTP-报文信息-笔记
data: 2017/2/17
tags:
  - 计算机网络#HTTP
categories:
  - 计算机网络
---

### HTTP报文内的HTTP信息

#### HTTP报文

* 用于HTTP协议交互的信息被称为报文
* 请求端（客户端）的HTTP报文称为请求报文
* 相应端（服务器端）的HTTP报文称为响应报文
* HTTP报文分为报文首部和报文主体（不一定有报文主体）

##### HTTP报文结构：

![](/uploads/图解HTTP/ 01.jpg)

<!-- more -->

#### HTTP报文结构

##### 请求报文和响应报文结构：

![](/uploads/图解HTTP/02.jpg)

##### 响应的实例

![](/uploads/图解HTTP/03.jpg)

#### 编码提升传输速率

* HTT在传输数据时可以直接将数据原貌传输，但也可以在传输的过程中通过编码来提升传输效率。虽然编码传输可以提升传输效率，但是编码的过程是由计算机来完成，所以会比较消耗计算机的ｃｐｕ资源

##### 报文主体和实体主体的差异

* 报文（Message）：是 HTTP 通信中的基本单位,由 8 位组字节流(octet sequence,其中 octet 为 8 个比特)组成,通过 HTTP 通信传输。
* 实体（entity）：作为请求或响应的有效载荷数据(补充项)被传输,其内容由实体首部和实体主体组成。
* 通常情况下，报文主体等于实体主体。只有当传输中进行编码操作时，实体主体的内容发生变化时，才导致它和报文主体产生差异。

##### 压缩传输的内容编码

* 内容编码指明应用在实体内容上的编码，并保持实体信息原样压缩。内容编码后的实体由客户端接收并负责解码

![](/uploads/图解HTTP/04.jpg)

* 内容编码的常用格式：
 * gzip（GNU zip）
 * compress（UNIX系统的标准压缩）
 * deflate（zlib）
 * ide ntity（不进行编码）

##### 分割发送的分块传输编码

* 把实体分块的功能称为分块传输功能（Chunked Transfer Coding）。该功能适应于大数据量传输时，可以逐步的显示内容，不必让用户等待太久

![](/uploads/图解HTTP/05.jpg)

##### 发送多种数据的多部分集合

* 发送报文的主体内包含多类型实体
* 多部分对象集合包含的对象如下：
 * multipart/form-data:在 Web 表单文件上传时使用。
 * multipart/byteranges:状态码 206(Partial Content,部分内容)响应报文包含了多个范围的内容时使用。

##### 获取部分内容的范围请求

* 范围请求指的是对一份字节资源，进行部分范围内的请求

![](/uploads/图解HTTP/06.jpg)

* 执行请求时可以根据Range首部字段来指定字节的范围：
 * 5001~10 000 字节
``
Range: bytes=5001-10000
``
* 请求范围的返回状态码为206 Partial Content的响应报文。
* 另外,对于多重范围的范围请求,响应会在首部字段 Content-Type 标明 multipart/byteranges 后返回响应报文。
* 如果服务器端无法响应范围请求,则会返回状态码 200 OK 和完整的实体内容。

##### 内容协商

* 内容协商机制是指客户端和服务器端就响应的资源内容进行交涉,然后提供给客户端最为适合的资源。内容协商会以响应资源的语言、字符集、编码方式等作为判断的基准。

> 以上笔记来源于图解HTTP一书
