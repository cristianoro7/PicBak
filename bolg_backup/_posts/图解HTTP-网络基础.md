---
title: 图解HTTP-网络基础-笔记
data: 2017/2/17
tags:
  - 计算机网络#HTTP
categories:
  - 计算机网络
---
#### 网络基础 TCP/IP

##### TCP/IP协议族

* 我们通常使用到的网络是在**TCP/IP**协议族的基础上运作的。而HTTP属于它内部的一个子集。
* TCP/IP是互联网各类协议族的总称, 如图:
![](/uploads/图解HTTP/网络基础01.jpg)
<!-- more -->
* 协议中存在各式各样的内容,从电缆的规格到 IP 地址的选定方法、寻找异地用户的方法、双方建立通信的顺序,以及 Web 页面显示需要处理的步骤,等等。像这样把互联网通信的相关协议集合起来的协议族就叫做TCP/IP协议

##### TCP/IP的分层管理

* TCP/IP中一个重要的点就是分层设计。
* 层次: 应用层,传输层,网路层,链路层
* 分层设计的好处:
 * 利于修改:这样不会因某些地方要修改而导致整个协议都得修改,只需要各层把借口规范好,需要改动的时候就在相应的层次改动
 * 各层只需完成自己的任务,无需关注其他层次。比如:应用层不需知道怎么传输和接收方在哪里
* **TCP/IP协议族各层的作用**
 * 应用层: 该层决定了想用户提供服务时的通信活动。TCP/IP协议族中预存了各类通用的应用服务,比如, FTP(File Transfer Protocol, 文件传输协议) 和 DNS (Domain Name System, 域名解析系统), HTTP协议处于应用层。
 * 传输层: 该层对上层应用层, 提供处于网络连接中的两台计算机之间的数据传输。传输层中有两个性质不同的协议:**TCP(Transmission Control Protocol, 传输控制协议) 和 UDP(User Data Protocol, 用户数据报协议)**
 * 网络层(网路互连层): 该层用来处理在网络上流动的数据包, 数据包是在网络传输时的最小数据单位, 网络层规定了通过怎么样的路径到达对方的计算机,并把数据包发给对方
 * 链路层(有名:数据链路层, 网络接口层):用来处理连接网络的硬件部分。包括控制操作系统、硬件的设备驱动、NIC(Network Interface Card,网络适配器,即网卡),及光纤等物理可见部分(还包括连接器等一切传输媒介)。硬件上的范畴均在
链路层的作用范围之内。

##### TCP/IP通信传输流

![](/uploads/图解HTTP/网络基础02.jpg)

* 从上图,我们可以清楚:使用TCP/IP协议进行网络通信时,发送端是从应用层往下走,接收端是往应用层上走
* 我们用 HTTP 举例来说明,首先作为发送端的客户端在应用层(HTTP 协议)发出一个想看某个 Web 页面的 HTTP 请求。接着,为了传输方便,在传输层(TCP 协议)把从应用层处收到的数据(HTTP 请求报文)进行分割,并在各个报文上打上标记序号及端口号后转发给网络层。在网络层(IP 协议),增加作为通信目的地的 MAC地址后转发给链路层。这样一来,发往网络的通信请求就准备齐全了。接收端的服务器在链路层接收到数据,按序往上层发送,一直到应用层。当传输到应用层,才能算真正接收到由客户端发送过来的 HTTP请求。

![](/uploads/图解HTTP/网络基础03.jpg)

* 发送端在层与层之间传输数据时,每经过一层时必定会被打上一个该层所属的首部信息。反之,接收端在层与层传输数据时,经过一层时会把对应的首部消去。

##### 与HTTP关系密切的协议: TCP IP DNS

* 负责传输的IP协议:
1.按层次分,IP(Internet Protocol)网际协议位于网络层。
2.IP协议的作用是把各种数据包发送给对方,其中发送成功的;两个重要条件时:IP地址和MAC地址(Media Access Control Address)
3.MAC地址所指的是网卡地址,不可以改变,而IP地址则可以变换
4.在网络条通信中,双方同时位于同一个局域网内的情况是很少的,通常是是经过多台计算机和网络设备中转才能连接到对方。而在进行中转时,会利用下一站中转设备的 MAC地址来搜索下一个中转目标。这时,会采用 ARP 协议(AddressResolution Protocol)。ARP 是一种用以解析地址的协议,根据通信方的 IP 地址就可以反查出对应的 MAC 地址。
5.无论哪台计算机、哪台网络设备,它们都无法全面掌握互联网中的细节。

![](/uploads/图解HTTP/网络基础04.jpg)

* 确保可靠性的TCP协议
1. 按层次分,TCP 位于传输层,提供可靠的字节流服务。所谓的字节流服务(Byte Stream Service)是指,为了方便传输,将大
块数据分割成以报文段(segment)为单位的数据包进行管理。而可靠的传输服务是指,能够把数据准确可靠地传给对方。一言以蔽之,TCP 协议为了更容易传送大数据才把数据分割,而且 TCP 协议能够确认数据最终是否送达到对方。
2. TCP协议采用三次握手(three-way-handshaking)策略来保证数据能准确无误的送达
3. 握手过程中使用了 TCP 的标志(flag) —— SYN(synchronize) 和ACK(acknowledgement)。
4. 发送端首先发送一个带 SYN 标志的数据包给对方。接收端收到后,回传一个带有SYN/ACK标志的数据包以示传达确认信息。最后,发送端再回传一个带ACK标志的数据包,代表“握手”结束。若在握手过程中某个阶段莫名中断,TCP协议会再次以相同的顺序发送相同的数据包。
5. 除了上面的三次握手,TCP协议还有其他的协议来保证通信的可靠。

![](/uploads/图解HTTP/网络基础05.jpg)

* DNS:
1. DNS 服务应运而生。DNS 协议提供通过域名查找 IP 地址,或逆向从 IP 地址反查域名的服务。

![](/uploads/图解HTTP/网络基础06.jpg)

##### 各种协议与HTTP协议的关系

![](/uploads/图解HTTP/网络基础07.jpg)

> 以上笔记来源于图解HTTP一书
